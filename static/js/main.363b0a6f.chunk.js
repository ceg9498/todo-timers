(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{83:function(e,t,a){e.exports=a(96)},88:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),i=a.n(o),l=(a(88),a(27)),c=a(32),s=a(33),u=a(36),d=a(34),m=a(37),h=a(40),p=a(160),f=a(138),g=a(139),y=a(141),v=a(140),E=a(142);function b(){var e=Object(n.useState)(!0),t=Object(h.a)(e,2),a=t[0],o=t[1];return r.a.createElement(p.a,{onClose:function(){return o(!1)},"aria-labelledby":"dialog-title",open:a},r.a.createElement(f.a,{id:"dialog-title"},"Welcome!"),r.a.createElement(g.a,null,r.a.createElement(v.a,null,C.p1),r.a.createElement(v.a,null,C.p2),r.a.createElement(v.a,null,C.p3),r.a.createElement(v.a,null,C.p4),r.a.createElement(v.a,null,C.p5)),r.a.createElement(y.a,null,r.a.createElement(E.a,{onClick:function(){return o(!1)}},"I Understand")))}var C={p1:"Hello, and welcome to the To-Do app made specifically for repeating tasks! Before you get started, I'd like to tell you a bit about how your data is saved.",p2:"Any data that you put into this app - task names, dates, times, and so on - is stored on your machine. The app's creator will never see it. If you wish to delete your data, you can do so under the 'Settings' tab.",p3:"There are, however, some drawbacks to this! This app will only work with one device; you won't be able to view the information provided on one device while using the app on another device; if you use it on a shared device (such as a family computer, or one in a public location), others who use the device would be able to see your data. In addition, since the data is stored on your machine, it will take up some local space. I've done my best to keep the amount of space taken to be really small, but if you provide long descriptions or have a lot of timers, it might get a bit big.",p4:"If you decide not to provide any data, or choose to delete your data from the settings menu, nothing will be saved on your device.",p5:"Happy To-do-ing!"},w=a(143),S=a(155),k=a(144),D=a(145);function O(e){return r.a.createElement(w.a,{position:"static"},r.a.createElement(S.a,{value:e.value,onChange:e.handleTabChange,role:"navigation"},r.a.createElement(k.a,{label:"All Timers",icon:r.a.createElement(D.a,null,"access_time")}),r.a.createElement(k.a,{label:"Add Timer",icon:r.a.createElement(D.a,null,"add")}),r.a.createElement(k.a,{label:"Settings",icon:r.a.createElement(D.a,null,"settings")})))}var T=7;function j(e){var t=e.split("."),a=new Date;if("i"===t[0]){var n=parseInt(t[1]);switch(t[2]){case"minutes":a.setMinutes(a.getMinutes()+n);break;case"hours":a.setHours(a.getHours()+n);break;case"days":a.setDate(a.getDate()+n);break;default:console.error("ERROR: interval unit not recognized.")}}else if("r"===t[0][0]){var r=!1;"g"===t[0][1]&&(r=!0);var o,i,l=parseInt(t[4]),c=parseInt(t[5]),s=t[6].split("").map(function(e){return parseInt(e)});if(s.indexOf(a.getDay())>-1){o=s.indexOf(a.getDay()),i=(r?a.getUTCHours():a.getHours())>=l?1===s.length?7:(T+s[++o]-a.getDay())%7:0}else{var u=!0,d=!1,m=void 0;try{for(var h,p=s[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var f=h.value;if(f>a.getDay()){i=(T+f-a.getDay())%7;break}}}catch(g){d=!0,m=g}finally{try{u||null==p.return||p.return()}finally{if(d)throw m}}void 0===i&&(i=(T+s[0]-a.getDay())%7)}a.setDate(a.getDate()+i),r?(a.setUTCHours(l),a.setUTCMinutes(c)):(a.setHours(l),a.setMinutes(c)),a.setSeconds(0),a.setMilliseconds(0)}return a}function I(e){return(new Date).valueOf()>e.valueOf()}var P=1,x=new Promise(function(e,t){if("indexedDB"in window){var a=window.indexedDB.open("timers",P);a.onerror=function(e){console.error("IndexedDB Error: ",a.error),t("Failed to open database")},a.onupgradeneeded=function(e){var a=e.target.result.createObjectStore("timerData",{keyPath:"id",autoIncrement:!0});a.onerror=function(){console.error("store not created, error: ",a.error),t("Failed to open database")}},a.onsuccess=function(n){var r=a.result.transaction("timerData","readonly").objectStore("timerData").getAll();r.onsuccess=function(t){var a;e(((a=t.target.result).forEach(function(e){e.resetTime=new Date(e.resetTime);var t=[];e.completed.forEach(function(e){t.push(new Date(e))}),e.completed=[].concat(t),e.isCompleted&&I(e.resetTime)&&(e.isCompleted=!1,e.resetTime=null)}),a))},r.onerror=function(e){console.error("Error: ",e.target.error),t("Failed to load data")}}}else console.warn("This browser doesn't support IndexedDB")});function N(e){return new Promise(function(t,a){var n=window.indexedDB.open("timers",P);n.onsuccess=function(r){var o=n.result.transaction("timerData","readwrite"),i=o.objectStore("timerData");delete e.countdown,i.put(e),o.oncomplete=function(e){t("Data saved successfully")},o.onerror=function(e){a("Failed to save data")}},n.onerror=function(e){a("Failed to save data")}})}var B=a(164),F=a(98),U=a(150),M=a(148),q=a(166),A=a(151),W=a(159),H=a(158),G=a(162),R=a(154),V=a(146),L=a(163),_=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e,t){var n=e.target,r="checkbox"===n.type?n.checked:n.value;switch(t){case"hour":r=a.verifyUnit(parseInt(r),0,24);break;case"minute":r=a.verifyUnit(parseInt(r),0,59);break;case"unitValue":r=a.verifyUnit(parseInt(r),1)}switch(t){case"allDays":case"sun":case"mon":case"tue":case"wed":case"thu":case"fri":case"sat":a.checkDaysState(t,r);break;default:a.setState(Object(l.a)({},t,r))}},a.clearForm=function(){a.setState({title:"",required:!1,isCompleted:!1,timerType:"regular",hour:11,minute:0,allDays:!1,partialDays:!1,days:{sun:!1,mon:!1,tue:!1,wed:!1,thu:!1,fri:!1,sat:!1},unitValue:1,unitType:"hours",description:"",category:""})},a.checkDaysState=function(e,t){var n=a.state.days,r=[];"allDays"===e?n={sun:!n.sun,mon:!n.mon,tue:!n.tue,wed:!n.wed,thu:!n.thu,fri:!n.fri,sat:!n.sat}:n[e]=t,(r=[n.sun,n.mon,n.tue,n.wed,n.thu,n.fri,n.sat]).includes(!1)?r.includes(!0)?a.setState({days:n,allDays:!0,partialDays:!0}):a.setState({days:n,allDays:!1,partialDays:!1}):a.setState({days:n,allDays:!0,partialDays:!1})},a.intervalPeriod=function(){var e="i.";return e+=a.state.unitValue+".",e+=a.state.unitType},a.regularPeriod=function(){var e="";if(a.state.useGlobalTime){e="rg.0000.00.00.";var t=(new Date).getTimezoneOffset(),n=Math.floor(t/60),r=t-60*n;e+=a.state.hour+n+".",e+=a.state.minute+r+"."}else e="rl.0000.00.00.",e+=a.state.hour+".",e+=a.state.minute+".";return e+=a.calculateDayOfWeek()},a.handleSubmit=function(e){var t;e.preventDefault(),t="interval"===a.state.timerType?a.intervalPeriod():a.regularPeriod();var n=[];a.state.isCompleted&&n.push(new Date);var r={id:0,title:a.state.title,resetTime:j(t),required:a.state.required,completed:n,isCompleted:a.state.isCompleted,period:t,description:a.state.description,category:a.state.category};a.props.addTimer(r)},a.state={title:"",required:!1,isCompleted:!1,timerType:"regular",useGlobalTime:!0,hour:11,minute:0,allDays:!1,partialDays:!1,days:{sun:!1,mon:!1,tue:!1,wed:!1,thu:!1,fri:!1,sat:!1},unitValue:1,unitType:"hours",description:"",category:""},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"verifyUnit",value:function(e,t,a){return e<t?t:e>a?a:Number.isNaN(e)?t:e}},{key:"calculateDayOfWeek",value:function(){var e="";return this.state.days.sun&&(e+="0"),this.state.days.mon&&(e+="1"),this.state.days.tue&&(e+="2"),this.state.days.wed&&(e+="3"),this.state.days.thu&&(e+="4"),this.state.days.fri&&(e+="5"),this.state.days.sat&&(e+="6"),e}},{key:"render",value:function(){var e=this;return r.a.createElement("form",{autoComplete:"off"},r.a.createElement("h2",null,"Create a Timer"),r.a.createElement("div",{className:"basic-info"},r.a.createElement(q.a,{required:!0,id:"timer-name",name:"title",label:"Title",className:"timer-name-field",value:this.state.title,margin:"normal",onChange:function(t){return e.handleChange(t,"title")}}),r.a.createElement(q.a,{id:"timer-category",name:"category",label:"Category",className:"timer-category-field",value:this.state.category,margin:"normal",onChange:function(t){return e.handleChange(t,"category")}}),r.a.createElement(U.a,{control:r.a.createElement(A.a,{checked:this.state.required,onChange:function(t){return e.handleChange(t,"required")}}),label:"Important",className:"important-field"}),r.a.createElement(U.a,{control:r.a.createElement(A.a,{checked:this.state.isCompleted,onChange:function(t){return e.handleChange(t,"isCompleted")}}),label:"Create as Completed",className:"completed-field"}),r.a.createElement(B.a,{component:"fieldset",className:"timer-type-field"},r.a.createElement(F.a,{component:"legend"},"Timer Type"),r.a.createElement(G.a,{name:"timerType",value:this.state.timerType,onChange:function(t){return e.handleChange(t,"timerType")}},r.a.createElement(U.a,{value:"regular",control:r.a.createElement(H.a,null),label:"Scheduled"}),r.a.createElement(U.a,{value:"interval",control:r.a.createElement(H.a,null),label:"Repeating"})))),r.a.createElement("div",{className:"specific-info"},"regular"===this.state.timerType?r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{component:"legend"},"When should this timer reset?"),r.a.createElement("div",{className:"time-input"},r.a.createElement(U.a,{control:r.a.createElement(V.a,{required:!0,id:"regular-hour",type:"number",name:"hour",value:this.state.hour,onChange:function(t){return e.handleChange(t,"hour")}}),label:"\xa0hour"}),"and\xa0\xa0\xa0\xa0",r.a.createElement(U.a,{control:r.a.createElement(V.a,{required:!0,id:"regular-minute",type:"number",name:"minute",value:this.state.minute,onChange:function(t){return e.handleChange(t,"minute")}}),label:"\xa0minutes"})),r.a.createElement(L.a,{placement:"right",title:"Recommended for events that happen on a global scale. Disable this option if it is for local events."},r.a.createElement(U.a,{control:r.a.createElement(A.a,{checked:this.state.useGlobalTime,onChange:function(t){return e.handleChange(t,"useGlobalTime")}}),label:"Ignore changes from Daylight Savings Time"})),r.a.createElement("br",null),r.a.createElement(U.a,{control:this.state.partialDays?r.a.createElement(W.a,{indeterminate:!0,checked:this.state.allDays,onChange:function(t){return e.handleChange(t,"allDays")}}):r.a.createElement(W.a,{checked:this.state.allDays,onChange:function(t){return e.handleChange(t,"allDays")}}),label:"Toggle All Days"}),r.a.createElement("div",{className:"days-input"},r.a.createElement(U.a,{control:r.a.createElement(W.a,{checked:this.state.days.mon,onChange:function(t){return e.handleChange(t,"mon")}}),label:"Monday"}),r.a.createElement(U.a,{control:r.a.createElement(W.a,{checked:this.state.days.tue,onChange:function(t){return e.handleChange(t,"tue")}}),label:"Tuesday"}),r.a.createElement(U.a,{control:r.a.createElement(W.a,{checked:this.state.days.wed,onChange:function(t){return e.handleChange(t,"wed")}}),label:"Wednesday"}),r.a.createElement(U.a,{control:r.a.createElement(W.a,{checked:this.state.days.thu,onChange:function(t){return e.handleChange(t,"thu")}}),label:"Thursday"}),r.a.createElement(U.a,{control:r.a.createElement(W.a,{checked:this.state.days.fri,onChange:function(t){return e.handleChange(t,"fri")}}),label:"Friday"}),r.a.createElement(U.a,{control:r.a.createElement(W.a,{checked:this.state.days.sat,onChange:function(t){return e.handleChange(t,"sat")}}),label:"Saturday"}),r.a.createElement(U.a,{control:r.a.createElement(W.a,{checked:this.state.days.sun,onChange:function(t){return e.handleChange(t,"sun")}}),label:"Sunday"}))):r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{component:"legend"},"When should this timer reset?"),r.a.createElement(U.a,{control:r.a.createElement(V.a,{required:!0,id:"interval-unit-value",type:"number",name:"unitValue",value:this.state.unitValue,onChange:function(t){return e.handleChange(t,"unitValue")},className:"time-input"}),label:this.state.unitType}),r.a.createElement(M.a,{htmlFor:"unitType"},"Time Period"),r.a.createElement(R.a,{native:!0,value:this.state.unitType,onChange:function(t){return e.handleChange(t,"unitType")},inputProps:{name:"period",id:"interval-period"}},r.a.createElement("option",{value:"minutes"},"minutes"),r.a.createElement("option",{value:"hours"},"hours"),r.a.createElement("option",{value:"days"},"days")))),r.a.createElement(q.a,{multiline:!0,fullWidth:!0,id:"timer-description",name:"description",label:"Description",className:"timer-description-field",value:this.state.description,margin:"normal",onChange:function(t){return e.handleChange(t,"description")}}),r.a.createElement("br",null),r.a.createElement(E.a,{variant:"contained",color:"primary",onClick:this.handleSubmit},"Submit"),"\xa0",r.a.createElement(E.a,{variant:"contained",onClick:this.clearForm},"Clear"))}}]),t}(r.a.Component),z=a(161);function J(e){var t=e.isSnackOpen,a=e.message,n=e.closeSnack;return r.a.createElement(z.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:t,autoHideDuration:6e3,onClose:n,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},a)})}function Y(e){var t=e.setOptions,a=e.optionsState,o=Object(n.useState)(!1),i=Object(h.a)(o,2),l=i[0],c=i[1],s=Object(n.useState)(!1),u=Object(h.a)(s,2),d=u[0],m=u[1],p=Object(n.useState)(""),f=Object(h.a)(p,2),g=f[0],y=f[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{control:r.a.createElement(A.a,{checked:a.hideCompleted,onChange:function(e){return t(e,"hideCompleted")}}),label:"Hide Completed"}),r.a.createElement("br",null),r.a.createElement(U.a,{control:r.a.createElement(A.a,{checked:a.viewSlim,onChange:function(e){return t(e,"viewSlim")}}),label:"Slim Timers"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(E.a,{onClick:function(){return c(!0)}},"Delete my data"),r.a.createElement($,{isOpen:l,close:c,setSnack:m,snackMsg:y}),r.a.createElement(J,{isSnackOpen:d,closeSnack:m,message:g}))}function $(e){var t=e.isOpen,a=e.close,n=e.setSnack,o=e.snackMsg;return r.a.createElement(p.a,{onClose:function(){return a(!1)},"aria-labelledby":"dialog-title",open:t},r.a.createElement(f.a,{id:"dialog-title"},"Delete?"),r.a.createElement(g.a,null,r.a.createElement(v.a,null,"Are you sure you want to delete your data? This action cannot be undone!")),r.a.createElement(y.a,null,r.a.createElement(E.a,{onClick:function(){return a(!1)}},"Cancel"),r.a.createElement(E.a,{onClick:function(){return function(e,t,a){e(!1),new Promise(function(e,t){var a=window.indexedDB.open("timers",P);a.onsuccess=function(n){var r=a.result.transaction("timerData","readwrite"),o=r.objectStore("timerData").clear();o.onsuccess=function(t){e("Data has been successfully deleted")},o.onerror=function(e){t("Unable to delete data")},r.onerror=function(e){t("Unable to delete data")}},a.onerror=function(e){t("Unable to delete data")}}).then(function(e){a(e),t(!0)})}(a,n,o)}},"Yes, delete it")))}function K(e){if(void 0===e.timer)return r.a.createElement(r.a.Fragment,null);var t=e.closeDialog,a=e.isOpen,n=e.timer,o=e.deleteItem;return r.a.createElement(p.a,{onClose:t,"aria-labelledby":"dialog-title",open:a},r.a.createElement(f.a,{id:"dialog-title"},n.title),r.a.createElement(g.a,null,r.a.createElement(v.a,null,n.category),r.a.createElement(v.a,null,n.description),r.a.createElement(v.a,null,n.completed.length>0&&"Last completion: "+n.completed[n.completed.length-1].toLocaleString(),r.a.createElement("br",null),n.isCompleted&&"Next reset time: "+n.resetTime.toLocaleString())),r.a.createElement(y.a,null,r.a.createElement(E.a,{onClick:t},"Close"),r.a.createElement(E.a,{onClick:function(){return o(e.timer.id,"dialog")}},"Delete")))}a(94);var Q=a(70);function X(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?X(a,!0).forEach(function(t){Object(l.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):X(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ee=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).completedBorderStyle={borderColor:"#888"},a.completedBGStyle={backgroundColor:"#888"},a.largePadStyle={top:"-1px",width:"15px",height:"100px"},a.largeCardStyle={height:"100px",alignItems:"start"},a.titleStyle={width:"335px"},a.descriptionStyle={overflowY:"auto"},a.state={},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.data,a=this.props.viewSlim,n={completedBorder:{},completedBG:{},card:{},pad:{},title:{},description:{}};return t?(t.isCompleted&&(n.completedBorder=this.completedBorderStyle,n.completedBG=this.completedBGStyle),a||(n.card=this.largeCardStyle,n.pad=this.largePadStyle,n.description=this.descriptionStyle,n.title=this.titleStyle),r.a.createElement("div",{className:"timerCard",style:Z({},n.completedBorder,{},n.card)},r.a.createElement("div",{className:"toggleArea",onClick:function(){return e.props.handleChange(t.id)}},r.a.createElement("div",{className:"pad",style:Z({},n.pad,{},n.completedBG)}),r.a.createElement("div",{className:"titleArea",style:n.title}," ",r.a.createElement("h6",null,t.required&&r.a.createElement("span",{className:"reqSym"},"\u203c\ufe0f\xa0"),t.title),void 0!==t.countdown&&null!==t.countdown?r.a.createElement("span",{className:"date"},"In ",t.countdown):t.completed.length>0?r.a.createElement("span",{className:"date"},"Last completed: ",t.completed[t.completed.length-1].toDateString()):r.a.createElement("span",{className:"date"}),!a&&void 0!==t.description&&r.a.createElement("div",{style:n.description},t.description))),r.a.createElement("div",{className:"actionsArea"}," ",a?r.a.createElement(Q.a,{"aria-label":t.title+" Details",onClick:function(){return e.props.info(t.id)}},r.a.createElement(D.a,{className:"info"},"info")):r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.a,{"aria-label":"Edit "+t.title,onClick:function(){return console.log("Edit Clicked")}},r.a.createElement(D.a,{className:"edit"},"edit")),r.a.createElement(Q.a,{"aria-label":"Delete "+t.title,onClick:function(){return e.props.delete(t.id,"timerCard")}},r.a.createElement(D.a,{className:"delete"},"delete_forever")))))):r.a.createElement(r.a.Fragment,null)}}]),t}(n.Component);function te(e){var t=e.filtered,a=e.handleChange,n=e.deleteItem,o=e.viewSlim,i=e.openDialog;return o?r.a.createElement("div",{className:"flex"},t.map(function(e){return r.a.createElement("div",{key:e.id},r.a.createElement(ee,{data:e,viewSlim:o,handleChange:a,info:i}))})):r.a.createElement("div",{className:"flex"},t.map(function(e){return r.a.createElement("div",{key:e.id},r.a.createElement(ee,{data:e,viewSlim:o,handleChange:a,delete:n}))}))}a(95);var ae=a(156),ne=a(152),re=a(153),oe=a(56);function ie(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function le(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ie(a,!0).forEach(function(t){Object(l.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ie(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ce=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).setCategories=function(e){var t=[];e.forEach(function(e){""!==e.category&&(t.includes(e.category)||t.push(e.category))}),a.setState({categories:t})},a.handleChange=function(e){var t=a.state.data;t.forEach(function(t){t.id===e&&(t.isCompleted=!t.isCompleted,t.isCompleted?(t.completed.push(new Date),t.completed.length>7&&t.completed.shift(),t.resetTime=j(t.period)):(t.completed.pop(),t.countdown=null,t.resetTime=null),N(t).then(function(e){a.openSnack(e)}).catch(function(e){a.openSnack(e)}))}),a.setState({data:t}),a.createTimeout(t)},a.delete=function(e,t){(function(e){return new Promise(function(t,a){var n=window.indexedDB.open("timers",P);n.onsuccess=function(r){var o=n.result.transaction("timerData","readwrite"),i=o.objectStore("timerData"),l=i.get(e),c=i.delete(e),s="";l.onsuccess=function(e){s=e.target.result.title},c.onsuccess=function(e){t(""!==s?s+" was deleted":"Timer was deleted")},c.onerror=function(e){a("Unable to delete entry")},o.onerror=function(e){a("Unable to delete entry")}},n.onerror=function(e){a("Unable to delete entry")}})})(e).then(function(n){a.openSnack(n);var r=[];a.state.data.forEach(function(t){t.id!==e&&r.push(t)}),a.setCategories(r),a.setState({data:r}),"dialog"===t&&a.closeDialog(null)}).catch(function(e){a.openSnack(e)})},a.handleReset=function(){var e,t=0,n=a.state.data;n.forEach(function(e){!0===e.isCompleted&&I(e.resetTime)&&(e.resetTime=null,e.isCompleted=!1,t++)}),t>0&&(e=n,new Promise(function(t,a){var n=window.indexedDB.open("timers",P);n.onsuccess=function(r){var o=n.result.transaction("timerData","readwrite"),i=o.objectStore("timerData");e.forEach(function(e){delete e.countdown,i.put(e).onerror=function(t){a("Error storing item "+e.title)}}),o.oncomplete=function(e){t("Data saved successfully")},o.onerror=function(e){a("Failed to save data")}},n.onerror=function(e){a("Failed to save data")}})).then(function(){a.createTimeout(n),a.setState({data:n}),1===t?a.openSnack("A timer has reset"):a.openSnack(t+" timers have reset")}).catch(function(e){a.openSnack(e)})},a.createTimeout=function(e){null!==a.state.timeout&&clearTimeout(a.state.timeout),void 0===e&&(e=a.state.data);var t,n=864e5,r=new Date;e.forEach(function(e){e.isCompleted&&e.resetTime.valueOf()-r.valueOf()<n&&(n=e.resetTime.valueOf()-r.valueOf(),t=e.resetTime)}),n+=1e4;var o=setTimeout(function(){return a.handleReset()},n);a.setState({nextReset:t,timeout:o})},a.createCountdown=function(){if(!a.state.hideCompleted&&(null!==a.state.countdown&&clearInterval(a.state.countdown),!a.state.hideCompleted)){var e=setInterval(function(){return a.tickCountdown()},1e4);a.setState({countdown:e})}},a.tickCountdown=function(){var e=new Date,t=a.state.data;t.forEach(function(t){if(t.isCompleted){var a=t.resetTime.valueOf()-e.valueOf(),n=Math.floor(a/864e5);a-=864e5*n;var r=Math.floor(a/36e5);a-=36e5*r;var o="";if(n>0)o+=n+" days and ",r>0&&(o+=r+" hours");else{var i=Math.floor(a/6e4);a-=6e4*i;var l=Math.floor(a/1e3);o+=r.toString().padStart(2,"0")+":",o+=i.toString().padStart(2,"0")+":",o+=l.toString().padStart(2,"0")}t.countdown=o}}),a.setState({data:t})},a.addTimer=function(e){var t=a.state.data,n=0,r=[];for(t.forEach(function(e){r.push(e.id)});r.includes(n);)n++;e.id=n,N(e).then(function(n){a.openSnack(n),t.push(e);var r=a.state.section,o=a.state.categories;""===e.category||o.includes(e.category)||a.setCategories(t),a.setState({data:t,displayAddForm:!1,categories:o,section:r})}).catch(function(e){a.openSnack(e)})},a.handleTabChange=function(e,t){a.setState({section:t})},a.openSnack=function(e){a.setState({snack:{isOpen:!0,message:e}})},a.closeSnack=function(e,t){a.setState({snack:{isOpen:!1,message:""}})},a.openDialog=function(e){var t;a.state.data.forEach(function(a,n){a.id===e&&(t=n)}),a.setState({dialog:{isOpen:!0,id:t}})},a.closeDialog=function(e,t){a.setState({dialog:{isOpen:!1,id:null}})},a.setOptions=function(e,t){var n="checkbox"===e.target.type?e.target.checked:e.target.value;a.setState({options:le({},a.state.options,Object(l.a)({},t,n))}),"hideCompleted"===t&&(n?clearInterval(a.state.countdown):a.createCountdown())},a.state={data:[],nextReset:null,timeout:null,countdown:null,section:0,snack:{isOpen:!1,message:""},options:{hideCompleted:!1,viewSlim:!0},dialog:{isOpen:!1,id:null}},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this;x.then(function(t){e.setState({data:t}),e.createTimeout(t),e.createCountdown(),e.setCategories(t)}).catch(function(t){e.openSnack(t)})}},{key:"componentWillUnmount",value:function(){null!==this.state.timeout&&clearTimeout(this.state.timeout),null!==this.state.countdown&&clearInterval(this.state.countdown)}},{key:"render",value:function(){var e=this,t=0,a=1,n=2;return r.a.createElement("article",{id:"article"},r.a.createElement(b,null),r.a.createElement(O,{value:this.state.section,handleTabChange:this.handleTabChange,categories:this.state.categories}),r.a.createElement(oe.a,{component:"section",role:"tabpanel",hidden:this.state.section!==t,id:"top"},r.a.createElement(ae.a,{defaultExpanded:!0},r.a.createElement(ne.a,{expandIcon:r.a.createElement(D.a,null,"expand_more")},"Important Timers"),r.a.createElement(re.a,null,r.a.createElement(te,{filtered:se(this.state.data,this.state.options.hideCompleted).filter(function(e){return!0===e.required}),handleChange:this.handleChange,viewSlim:this.state.options.viewSlim,openDialog:this.openDialog,deleteItem:this.delete}))),void 0!==this.state.categories&&this.state.categories.map(function(t){return r.a.createElement(ae.a,{key:t},r.a.createElement(ne.a,{expandIcon:r.a.createElement(D.a,null,"expand_more")},t),r.a.createElement(re.a,null,r.a.createElement(te,{filtered:se(e.state.data,e.state.options.hideCompleted).filter(function(e){return e.category===t}),handleChange:e.handleChange,viewSlim:e.state.options.viewSlim,openDialog:e.openDialog,deleteItem:e.delete})))})),r.a.createElement(oe.a,{component:"section",role:"tabpanel",hidden:this.state.section!==a,id:"addTimer"},r.a.createElement(_,{addTimer:this.addTimer})),r.a.createElement(oe.a,{component:"section",role:"tabpanel",hidden:this.state.section!==n,id:"options"},r.a.createElement("h2",null,"Options"),r.a.createElement(Y,{setOptions:this.setOptions,optionsState:this.state.options})),r.a.createElement(K,{closeDialog:this.closeDialog,isOpen:this.state.dialog.isOpen,deleteItem:this.delete,timer:this.state.data[this.state.dialog.id]}),r.a.createElement(J,{isSnackOpen:this.state.snack.isOpen,message:this.state.snack.message,closeSnack:this.closeSnack}))}}]),t}(n.Component);function se(e,t){var a=e;return t&&(a=a.filter(function(e){return!e.isCompleted})),a}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(ce,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[83,1,2]]]);
//# sourceMappingURL=main.363b0a6f.chunk.js.map